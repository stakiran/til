# Terraform の create_before_destroy

## 必要性
リソースAを更新したいとする

-  普通はAを直接更新する
    -  が、API制限でできないことがある
- どうするか？
    - デフォの動作ではこうする
    - 1: Aを消す
    - 2: 更新後の値を採用したAを作り直す

だが、これだと問題が起こることがある

- たとえば B が A に依存している場合、1: の A を消すところで失敗する

どうすれば？

- そこで create_before_destory の出番
- こいつはこうする
    - 1: 更新後の値を採用した A を A' としてつくる
    - 2: B には A' を差させる
    - (ここで A への依存はなくなったので)
    - 3: A を消す

## リソースの name に乱数やランダムな名前を設定するってどういうこと？
Ans: A' をつくるときに、`A.name == A'.name` となると名前エラーになってしまうから回避したいって話

たとえば name を乱数でランダムにつくるとしたら、まあ被らないだろうからこのエラーは出ない。そのため一部の Terraform リソースでは「name をランダムな値にする」的な仕様がある。
